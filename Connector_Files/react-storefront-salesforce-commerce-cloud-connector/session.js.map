{"version":3,"sources":["../src/session.js"],"names":["getClient","encodeUser","COOKIES","getCart","session","req","res","client","cart","setHeader","USER","user","signedIn","authType"],"mappings":"AAAA,OAAOA,SAAP,IAAoBC,UAApB,QAAsC,gBAAtC;AACA,SAASC,OAAT,QAAwB,mBAAxB;AACA,OAAOC,OAAP,MAAoB,iBAApB;AAEA,eAAe,eAAeC,OAAf,CAAuBC,GAAvB,EAA4BC,GAA5B,EAAiC;AAC9C,QAAMC,MAAM,GAAG,MAAMP,SAAS,CAACK,GAAD,CAA9B;AAEA,QAAME,MAAM,CAACH,OAAP,EAAN;AAEA,QAAMI,IAAI,GAAG,MAAML,OAAO,CAACI,MAAD,CAA1B;AAEAD,EAAAA,GAAG,CAACG,SAAJ,CAAc,YAAd,EAA6B,GAAEP,OAAO,CAACQ,IAAK,IAAGT,UAAU,CAACM,MAAM,CAACI,IAAR,CAAc,UAAvE;AAEA,SAAO;AAAEH,IAAAA,IAAF;AAAQI,IAAAA,QAAQ,EAAEL,MAAM,CAACI,IAAP,CAAYE,QAAZ,KAAyB;AAA3C,GAAP;AACD","sourcesContent":["import getClient, { encodeUser } from './utils/client'\nimport { COOKIES } from './utils/constants'\nimport getCart from './utils/getCart'\n\nexport default async function session(req, res) {\n  const client = await getClient(req)\n\n  await client.session()\n\n  const cart = await getCart(client)\n\n  res.setHeader('Set-Cookie', `${COOKIES.USER}=${encodeUser(client.user)}; Path=/`)\n\n  return { cart, signedIn: client.user.authType === 'registered' }\n}\n"],"file":"session.js"}