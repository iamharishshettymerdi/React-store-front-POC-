{"version":3,"sources":["../src/search.js"],"names":["fulfillAPIRequest","createAppData","productListing","search","params","req","appData","pageData","getPageData","q","filters","plp","refine","JSON","parse","name","title","breadcrumbs","text","href"],"mappings":"AAAA,OAAOA,iBAAP,MAA8B,0CAA9B;AACA,OAAOC,aAAP,MAA0B,uBAA1B;AACA,OAAOC,cAAP,MAA2B,wBAA3B;AAEA,eAAe,eAAeC,MAAf,CAAsBC,MAAtB,EAA8BC,GAA9B,EAAmC;AAChD,SAAO,MAAML,iBAAiB,CAACK,GAAD,EAAM;AAClCC,IAAAA,OAAO,EAAEL,aADyB;AAElCM,IAAAA,QAAQ,EAAE,MAAMC,WAAW,CAACJ,MAAD,EAASC,GAAT;AAFO,GAAN,CAA9B;AAID;;AAED,eAAeG,WAAf,CAA2BJ,MAA3B,EAAmCC,GAAnC,EAAwC;AACtC,QAAM;AAAEI,IAAAA,CAAF;AAAKC,IAAAA,OAAO,GAAG;AAAf,MAAwBN,MAA9B;AAEA,QAAMO,GAAG,GAAG,MAAMT,cAAc,CAACE,MAAD,EAASC,GAAT,EAAc;AAC5CI,IAAAA,CAD4C;AAE5CG,IAAAA,MAAM,EAAE,CAAC,GAAGC,IAAI,CAACC,KAAL,CAAWJ,OAAX,CAAJ;AAFoC,GAAd,CAAhC;AAKA,SAAO;AACLK,IAAAA,IAAI,EAAE,QADD;AAELC,IAAAA,KAAK,EAAE,QAFF;AAGLC,IAAAA,WAAW,EAAE,CACX;AACEC,MAAAA,IAAI,EAAE,MADR;AAEEC,MAAAA,IAAI,EAAE;AAFR,KADW,CAHR;AASL,OAAGR;AATE,GAAP;AAWD","sourcesContent":["import fulfillAPIRequest from 'react-storefront/props/fulfillAPIRequest'\nimport createAppData from './utils/createAppData'\nimport productListing from './utils/productListing'\n\nexport default async function search(params, req) {\n  return await fulfillAPIRequest(req, {\n    appData: createAppData,\n    pageData: () => getPageData(params, req),\n  })\n}\n\nasync function getPageData(params, req) {\n  const { q, filters = '[]' } = params\n\n  const plp = await productListing(params, req, {\n    q,\n    refine: [...JSON.parse(filters)],\n  })\n\n  return {\n    name: 'Search',\n    title: 'Search',\n    breadcrumbs: [\n      {\n        text: 'Home',\n        href: '/',\n      },\n    ],\n    ...plp,\n  }\n}\n"],"file":"search.js"}